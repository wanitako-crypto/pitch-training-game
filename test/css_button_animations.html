<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Button Click Animations</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

        /* --- 全体的なレイアウト --- */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f2f5;
            color: #333;
            margin: 0;
            padding: 2rem;
            text-align: center;
        }
        h1 { font-size: 2.5rem; color: #2c3e50; }
        p { margin-bottom: 3rem; }
        .showcase-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }
        .showcase-card {
            background-color: #ffffff;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 250px;
        }
        .showcase-card h2 { margin-top: 0; margin-bottom: 1.5rem; color: #34495e; }

        /* --- ボタンの共通スタイル --- */
        .btn {
            border: none;
            padding: 1rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            outline: none;
            transition: all 0.2s ease;
            position: relative;
            -webkit-tap-highlight-color: transparent; /* モバイルでタップした時のハイライトを消す */
        }

        /* --- 1. 3Dプレスボタン --- */
        .btn-press {
            background-color: #f1c40f;
            color: #fff;
            /* 通常時の影。Y軸方向に6pxの太い影を付けて厚みを表現 */
            box-shadow: 0 6px #d4ac0d;
        }
        .btn-press:hover {
            /* ホバー時に少し上に移動し、影を太くして浮き上がったように見せる */
            transform: translateY(-2px);
            box-shadow: 0 8px #d4ac0d;
        }
        /* :active疑似クラスは、要素がクリックされている間のスタイルを定義 */
        .btn-press:active {
            /* クリック時に下に移動し、影を細くして押し込まれたように見せる */
            transform: translateY(4px);
            box-shadow: 0 2px #d4ac0d;
        }

        /* --- 2. リップルエフェクト（波紋効果）ボタン --- */
        .btn-ripple {
            background-color: #3498db;
            color: #fff;
            position: relative; /* 子要素の.rippleを絶対配置するための基準点 */
            overflow: hidden; /* ボタンの範囲外に広がる波紋を隠す */
        }
        .ripple {
            position: absolute; /* 親要素(.btn-ripple)を基準に配置 */
            border-radius: 50%; /* 円形にする */
            background-color: rgba(255, 255, 255, 0.4);
            width: 100px;  /* 波紋の基本サイズ */
            height: 100px;
            /* JSで指定されたleft/topを基準に、要素自体を中央に補正し、初期状態をスケール0（見えない）にする */
            transform: translate(-50%, -50%) scale(0);
        }
        /* JSによってis-activeクラスが付与されたらアニメーションを開始 */
        .ripple.is-active {
            /* `ripple-animation`というキーフレームを0.6秒かけて実行 */
            animation: ripple-animation 0.6s ease-out;
        }
        @keyframes ripple-animation {
            to {
                /* アニメーション終了時には、スケールを3倍にして透明にする */
                transform: translate(-50%, -50%) scale(3);
                opacity: 0;
            }
        }

        /* --- 3. パーティクルエフェクトボタン --- */
        .btn-particle {
            background-color: #e74c3c;
            color: #fff;
        }
        /* ::before疑似要素を使って、アニメーションのキャンバスを作る */
        .btn-particle.animate::before {
            content: '';
            position: absolute;
            left: 0; top: 0;
            width: 100%; height: 100%;
            /* `particles-animation`キーフレームを0.6秒かけて実行 */
            animation: particles-animation 0.6s ease-out;
        }
        @keyframes particles-animation {
            0% {
                transform: scale(1);
                /* 初期状態では影はなし */
                box-shadow: 0 0 0 0 rgba(0,0,0,0);
            }
            25% {
                /* ボタンが少し大きくなる演出 */
                 transform: scale(1.1);
            }
            100% {
                transform: scale(1);
                /* 
                 * 複数のbox-shadowを同時に定義し、それぞれを異なる方向に飛ばすことで、
                 * 粒子が飛び散るように見せるトリック。
                 * 最後の `0px 0px 0 25px rgba(255,255,255,0)` は、
                 * アニメーション中に見えない透明な影を広げることで、他の影が消えるのを滑らかに見せる効果がある。
                 */
                box-shadow: 
                    -60px -10px 0 -10px #f1c40f, 60px 20px 0 -10px #3498db,
                    -40px 60px 0 -10px #9b59b6, 50px -50px 0 -10px #2ecc71,
                    0px 0px 0 25px rgba(255,255,255,0);
            }
        }

    </style>
</head>
<body>

    <h1>CSSボタン クリックアニメーション</h1>
    <p>CSSの`:active`疑似クラスやJavaScriptを少しだけ使って、クリック時のインタラクションを豊かにするアイデア集です。</p>

    <div class="showcase-grid">
        <div class="showcase-card">
            <h2>3Dプレス</h2>
            <button class="btn btn-press">Click Me!</button>
        </div>
        <div class="showcase-card">
            <h2>リップルエフェクト</h2>
            <button class="btn btn-ripple">Click Me!</button>
        </div>
        <div class="showcase-card">
            <h2>パーティクル</h2>
            <button class="btn btn-particle">Click Me!</button>
        </div>
    </div>

    <script>
    // --- リップルエフェクト用のJavaScript ---
    const rippleButtons = document.querySelectorAll('.btn-ripple');
    rippleButtons.forEach(button => {
        button.addEventListener('click', function (e) {
            // 前回のリップルが残っていれば削除する
            const existingRipple = this.querySelector('.ripple');
            if (existingRipple) {
                existingRipple.remove();
            }

            // ボタン内でのクリック座標を取得
            const rect = this.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            // 波紋となるspan要素を生成
            const ripple = document.createElement('span');
            ripple.className = 'ripple';
            ripple.style.left = `${x}px`; // クリックしたx座標に配置
            ripple.style.top = `${y}px`;  // クリックしたy座標に配置

            // ボタンに波紋要素を追加
            this.appendChild(ripple);
            
            // `setTimeout`でごくわずかな遅延を入れる。
            // これにより、ブラウザが要素の初期状態を確実に描画してからアニメーションクラスを追加するため、
            // アニメーションが安定して動作する。
            setTimeout(() => {
                ripple.classList.add('is-active');
            }, 5);
            
            // アニメーション終了後に波紋要素を削除する（DOMが散らからないように）
            setTimeout(() => {
                ripple.remove();
            }, 600); // CSSのアニメーション時間と合わせる
        });
    });

    // --- パーティクルエフェクト用のJavaScript ---
    const particleButtons = document.querySelectorAll('.btn-particle');
    particleButtons.forEach(button => {
        button.addEventListener('click', function () {
            // アニメーションをトリガーするための 'animate' クラスを追加
            this.classList.add('animate');

            // アニメーション終了後にクラスを削除し、再度クリックでアニメーションできるようにする
            setTimeout(() => {
                this.classList.remove('animate');
            }, 600); // CSSのアニメーション時間と合わせる
        });
    });
    </script>
</body>
</html>

